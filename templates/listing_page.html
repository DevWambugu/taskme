{% extends "base.html" %}

{% block content %}
    <div class="container">
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul class="flash-messages">
            {% for message in messages %}
            {% if loop.index == 1 %}
            <li class="flash-message">{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        <h1 style="text-align: center; color: black; margin-top: -50px; font-size: 24px;">Job Listing</h1>

        <!-- Category Filter -->
        <form id="filter-form" style="margin-bottom: 10px; margin-left: 0 !important;">
            <label for="category-filter">Filter by Category:</label>
            <select id="category-filter" name="category">
                <option value="">All Categories</option>
                {% for category in categories %}
                <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>{{ category }}</option>
                {% endfor %}
            </select>
            <button type="submit">Filter</button>
        </form>

        <!-- Job Listings -->
        <ul class="job-listing" style="padding: 0; margin-left: 0 !important;">
            {% for job in jobs %}
            <li>
                <a href="{{ url_for('main.job_details', job_id=job.id) }}">{{ job.title }} - {{ job.category }}</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    <script>
        // Fade out flashed messages after 4 seconds
        setTimeout(function() {
            var flashMessages = document.querySelectorAll('.flash-message');
            flashMessages.forEach(function(message) {
                message.style.opacity = '0';
            });
        }, 4000);
    </script>
{% endblock %}
